# -----------------------------------------------------
# TEST 32: Black Bishop Capture Enemy
# -----------------------------------------------------
# Black Bishop at (7,2) -> (4,5) captures White Rook
# play = [1, 7, 2]
# valid - expected result = 0
# -----------------------------------------------------

.section .data

# --- Before move ---
board_1:
    .byte 'r','n','b','q','k','b','n','r'
    .byte 'p','p','p','p','p','p','p','p'
    .byte 0,0,0,0,0,0,0,0
    .byte 0,0,0,0,0,0,0,0
    .byte 0,0,0,0,0,'r',0,0               # White Rook at 4,5
    .byte 0,0,0,0,0,0,0,0
    .byte 'P','P','P','P','P','P','P','P'
    .byte 'R','N','B','Q','K','B','N','R' # Bishop at 7,2

# --- After move ---
board_2:
    .byte 'r','n','b','q','k','b','n','r'
    .byte 'p','p','p','p','p','p','p','p'
    .byte 0,0,0,0,0,0,0,0
    .byte 0,0,0,0,0,0,0,0
    .byte 0,0,0,0,0,'B',0,0               # Bishop moved to 4,5 (captured 'r')
    .byte 0,0,0,0,0,0,0,0
    .byte 'P','P','P','P','P','P','P','P'
    .byte 'R','N', 0 ,'Q','K','B','N','R' # Bishop left 7,2

play:
    .int 1, 7, 2          # 1 = Black, Row=7, Col=2

valid:
    .byte 7                # output result placeholder

.section .text

    # After ex4 returns, check if valid = 1 
    movzbl valid(%rip), %eax  
    cmp $0, %al                
    je success                 

error:
    mov $60, %rax              # sys_exit
    mov $1, %rdi               # exit code 1 (error)
    syscall

success:
    mov $60, %rax              # sys_exit
    xor %rdi, %rdi             # exit code 0 (success)
    syscall

